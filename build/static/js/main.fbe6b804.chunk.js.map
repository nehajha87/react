{"version":3,"sources":["images/book.jpg","images/spinner.svg","components/app.js","config.js","index.js"],"names":["App","props","componentDidMount","getEvents","setInterval","tick","time","moment","format","setState","setStatus","now","events","state","e","length","eventItem","isBetween","start","dateTime","end","isBusy","isEmpty","isLoading","that","this","gapi","load","client","init","apiKey","then","request","path","toISOString","endOf","response","result","items","sortedEvents","sort","a","b","reason","console","log","eventsList","map","event","className","href","htmlLink","target","summary","diff","id","emptyState","src","welcomeImage","alt","loadingState","spinner","Component","render","document","getElementById"],"mappings":"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","file":"static/js/main.fbe6b804.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/book.6862f8ca.jpg\";","export default __webpack_public_path__ + \"static/media/spinner.5e9b4f97.svg\";","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n// import welcomeImage from \"../images/welcome.svg\";\r\nimport welcomeImage from \"../images/book.jpg\"\r\nimport spinner from \"../images/spinner.svg\";\r\nimport { GOOGLE_API_KEY, CALENDAR_ID } from \"../config.js\";\r\n\r\nexport default class App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      time: moment().format(\"dd, Do MMMM, h:mm A\"),\r\n      events: [],\r\n      isBusy: false,\r\n      isEmpty: false,\r\n      isLoading: true\r\n    };\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.getEvents();\r\n    setInterval(() => {\r\n      this.tick();\r\n    }, 1000);\r\n    setInterval(() => {\r\n      this.getEvents();\r\n    }, 60000);\r\n  };\r\n\r\n  getEvents() {\r\n    let that = this;\r\n    function start() {\r\n      gapi.client\r\n        .init({\r\n          apiKey: GOOGLE_API_KEY\r\n        })\r\n        .then(function () {\r\n          return gapi.client.request({\r\n            path: `https://www.googleapis.com/calendar/v3/calendars/${CALENDAR_ID}/events?maxResults=11&orderBy=updated&timeMin=${moment().toISOString()}&timeMax=${moment()\r\n              .endOf(\"day\")\r\n              .toISOString()}`\r\n          });\r\n        })\r\n        .then(\r\n          response => {\r\n            let events = response.result.items;\r\n            let sortedEvents = events.sort(function (a, b) {\r\n              return (\r\n                moment(b.start.dateTime).format(\"YYYYMMDD\") -\r\n                moment(a.start.dateTime).format(\"YYYYMMDD\")\r\n              );\r\n            });\r\n            if (events.length > 0) {\r\n              that.setState(\r\n                {\r\n                  events: sortedEvents,\r\n                  isLoading: false,\r\n                  isEmpty: false\r\n                },\r\n                () => {\r\n                  that.setStatus();\r\n                }\r\n              );\r\n            } else {\r\n              that.setState({\r\n                isBusy: false,\r\n                isEmpty: true,\r\n                isLoading: false\r\n              });\r\n            }\r\n          },\r\n          function (reason) {\r\n            console.log(reason);\r\n          }\r\n        );\r\n    }\r\n    gapi.load(\"client\", start);\r\n  }\r\n\r\n  tick = () => {\r\n    let time = moment().format(\"dddd, Do MMMM, h:mm A\");\r\n    this.setState({\r\n      time: time\r\n    });\r\n  };\r\n\r\n  setStatus = () => {\r\n    let now = moment();\r\n    let events = this.state.events;\r\n    for (var e = 0; e < events.length; e++) {\r\n      var eventItem = events[e];\r\n      if (\r\n        moment(now).isBetween(\r\n          moment(eventItem.start.dateTime),\r\n          moment(eventItem.end.dateTime)\r\n        )\r\n      ) {\r\n        this.setState({\r\n          isBusy: true\r\n        });\r\n        return false;\r\n      } else {\r\n        this.setState({\r\n          isBusy: false\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { time, events } = this.state;\r\n\r\n    let eventsList = events.map(function (event) {\r\n      return (\r\n        <a\r\n          className=\"list-group-item\"\r\n          href={event.htmlLink}\r\n          target=\"_blank\"\r\n          key={event.id}\r\n        >\r\n          {event.summary}{\" \"}\r\n          <span className=\"badge\">\r\n            {moment(event.start.dateTime).format(\"h:mm a\")},{\" \"}\r\n            {moment(event.end.dateTime).diff(\r\n              moment(event.start.dateTime),\r\n              \"minutes\"\r\n            )}{\" \"}\r\n            minutes, {moment(event.start.dateTime).format(\"MMMM Do\")}{\" \"}\r\n          </span>\r\n        </a>\r\n      );\r\n    });\r\n\r\n    let emptyState = (\r\n      <div className=\"empty\">\r\n        <img src={welcomeImage} alt=\"Welcome\" />\r\n        <h3>\r\n          No meetings are scheduled for the day. Create one by clicking the\r\n          button below.\r\n        </h3>\r\n      </div>\r\n    );\r\n\r\n    let loadingState = (\r\n      <div className=\"loading\">\r\n        <img src={spinner} alt=\"Loading...\" />\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <div\r\n          className={\r\n            this.state.isBusy ? \"current-status busy\" : \"current-status open\"\r\n          }\r\n        >\r\n          <h1>{this.state.isBusy ? \"BUSY\" : \"Book Now!!\"}</h1>\r\n        </div>\r\n        <div className=\"upcoming-meetings\">\r\n          <div className=\"current-time\">{time}, 2021</div>\r\n          <h1>Book Your Appointment Now!!</h1>\r\n          <div className=\"list-group\">\r\n            {this.state.isLoading && loadingState}\r\n            {events.length > 0 && eventsList}\r\n            {this.state.isEmpty && emptyState}\r\n          </div>\r\n          <a\r\n            className=\"primary-cta\"\r\n            href=\"https://calendar.google.com/calendar?cid=c3FtMnVkaTFhZGY2ZHM3Z2o5aDgxdHVldDhAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ\"\r\n            target=\"_blank\"\r\n          >\r\n            +\r\n          </a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","export const \r\n  GOOGLE_API_KEY = 'AIzaSyAp2j_S93QP-OPRcu_Rbuz187YIrqrDINc',\r\n  CALENDAR_ID = 'nehajha8720@gmail.com';","import React from 'react'\nimport { render } from 'react-dom'\nimport App from './components/app'\nimport './stylesheets/style.scss'\n\nrender(\n  <App />, \n  document.getElementById('root'),\n  function(){\n    let loader = document.getElementById('app-loader');\n    // loader.parentNode.removeChild(loader);\n  }\n)"],"sourceRoot":""}